# 快速开始指南

欢迎使用量化交易系统！本指南将帮助你在10分钟内完成系统的安装和第一次使用。

## 📋 前置要求

在开始之前，请确保你的系统满足以下要求：

- **操作系统**: Linux, macOS, 或 Windows (推荐使用WSL)
- **Python**: 3.8 或更高版本
- **内存**: 至少 16GB RAM
- **磁盘空间**: 至少 5GB 可用空间
- **网络**: 需要网络连接以下载数据

## 🚀 安装步骤

### 1. 检查Python版本

```bash
python --version
# 应该显示 Python 3.8.x 或更高
```

如果版本过低，请先升级Python。

### 2. 进入项目目录

```bash
cd Code/QuantitationTranding
```

### 3. 创建虚拟环境（推荐）

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Linux/macOS:
source venv/bin/activate
# Windows:
venv\Scripts\activate
```

### 4. 安装依赖

```bash
pip install -r requirements.txt
```

这将安装所有必需的Python包，包括：
- qlib (量化投资框架)
- mlflow (实验追踪)
- pandas, numpy (数据处理)
- matplotlib, seaborn (可视化)
- pytest, hypothesis (测试)

### 5. 一键初始化

```bash
python -m src.cli.main init
```

这个命令会：
- ✅ 检测系统环境
- ✅ 创建必要的目录
- ✅ 下载示例数据（约1GB）
- ✅ 配置qlib和MLflow
- ✅ 运行简单示例验证

**注意**: 首次下载数据可能需要10-30分钟，取决于网络速度。

## 🎯 第一次使用

### 启动系统

```bash
python -m src.cli.main
```

你会看到主菜单：

```
╔════════════════════════════════════════╗
║        量化交易系统 v1.0              ║
╚════════════════════════════════════════╝

主菜单:
  1. 训练模型
  2. 运行回测
  3. 生成交易信号
  4. 管理模型
  5. 数据管理
  6. 查看帮助
  7. 退出

请选择功能 (1-7): 
```

### 第一次训练模型

1. 输入 `1` 选择"训练模型"

2. 系统会询问你想使用哪种模型：
   ```
   可用的模型模板:
     1. LGBM模型 (推荐新手)
        - 适用场景: 中短期股票预测
        - 预期年化收益: 15-25%
     
     2. Linear模型
        - 适用场景: 因子分析和特征研究
        - 预期年化收益: 10-15%
     
     3. MLP神经网络
        - 适用场景: 复杂模式识别
        - 预期年化收益: 20-30%
   
   请选择模板 (1-3) [默认: 1]: 
   ```

3. 选择 `1` (LGBM模型，推荐新手)

4. 系统会询问训练参数，直接按回车使用默认值：
   ```
   训练数据起始日期 [默认: 2015-01-01]: 
   训练数据结束日期 [默认: 2020-12-31]: 
   股票池 [默认: csi300]: 
   ```

5. 确认开始训练：
   ```
   配置确认:
     模型: LGBM
     数据范围: 2015-01-01 至 2020-12-31
     股票池: 沪深300
   
   开始训练? (y/n) [默认: y]: 
   ```

6. 训练开始，你会看到进度：
   ```
   [1/4] 加载数据... ✓
   [2/4] 特征工程... ✓
   [3/4] 训练模型... 
         Epoch 1/100: loss=0.234
         Epoch 2/100: loss=0.198
         ...
   [4/4] 保存模型... ✓
   
   训练完成！
   模型ID: lgbm_20240101_123456
   训练时长: 3分42秒
   验证集IC: 0.045
   ```

7. 查看训练报告：
   ```
   训练报告已保存到: outputs/reports/training_lgbm_20240101_123456.html
   
   是否在浏览器中打开报告? (y/n) [默认: y]: 
   ```

### 第一次运行回测

1. 返回主菜单，输入 `2` 选择"运行回测"

2. 选择刚才训练的模型：
   ```
   可用的模型:
     1. lgbm_20240101_123456 (LGBM, 训练于 2024-01-01)
        验证集IC: 0.045
   
   请选择模型 (1): 
   ```

3. 输入回测时间段（使用默认值）：
   ```
   回测起始日期 [默认: 2021-01-01]: 
   回测结束日期 [默认: 2021-12-31]: 
   基准指数 [默认: SH000300]: 
   ```

4. 开始回测：
   ```
   [1/3] 加载模型... ✓
   [2/3] 生成信号... ✓
   [3/3] 执行回测... ✓
   
   回测完成！
   
   性能指标:
     年化收益率: 18.5%
     夏普比率: 1.42
     最大回撤: -12.3%
     超额收益: +8.2% (相对沪深300)
   
   详细报告已保存到: outputs/reports/backtest_20240101_123456.html
   ```

### 第一次生成交易信号

1. 返回主菜单，输入 `3` 选择"生成交易信号"

2. 选择模型（同上）

3. 系统生成最新的交易信号：
   ```
   正在生成交易信号...
   
   === 买入建议 (Top 10) ===
   
   1. 600519.SH (贵州茅台)
      预测得分: 0.85
      置信度: 高 ⭐⭐⭐
      建议仓位: 8%
      
      信号解释:
      - 近期动量强劲 (+15%)
      - 成交量放大 (+25%)
      - 技术指标看多
      
   2. 000858.SZ (五粮液)
      预测得分: 0.78
      置信度: 中 ⭐⭐
      建议仓位: 6%
      
      ⚠️ 风险提示: 近期波动较大
   
   ...
   
   === 卖出建议 ===
   
   1. 601318.SH (中国平安)
      预测得分: -0.42
      置信度: 高 ⭐⭐⭐
      建议操作: 清仓
      
      信号解释:
      - 技术指标转弱
      - 成交量萎缩
   
   ...
   ```

## 📚 下一步学习

恭喜！你已经完成了第一次使用。接下来你可以：

### 1. 深入学习
- 阅读 [用户手册](docs/user_guide.md) 了解所有功能
- 查看 [术语表](docs/glossary.md) 理解量化交易概念
- 学习 [API文档](docs/api_reference.md) 进行自定义开发

### 2. 尝试更多功能
- 训练不同类型的模型
- 调整模型参数优化性能
- 对比多个模型的表现
- 自定义回测策略

### 3. 查看示例
- `examples/01_first_training.md` - 详细的训练教程
- `examples/02_run_backtest.md` - 回测分析教程
- `examples/03_generate_signals.md` - 信号生成教程
- `examples/04_compare_models.md` - 模型对比教程

## 🔧 常见问题

### Q1: 数据下载失败怎么办？

**A**: 可以手动下载数据：
```bash
python scripts/get_data.py qlib_data --target_dir ./data/cn_data --region cn
```

如果还是失败，可以使用众包数据源：
```bash
wget https://github.com/chenditc/investment_data/releases/latest/download/qlib_bin.tar.gz
tar -zxvf qlib_bin.tar.gz -C ./data/cn_data --strip-components=2
```

### Q2: 训练时内存不足怎么办？

**A**: 可以减少训练数据量：
- 缩短时间范围（如只用3年数据）
- 使用更小的股票池（如沪深300而不是全市场）
- 调整模型参数减少内存使用

### Q3: 如何查看MLflow实验记录？

**A**: 启动MLflow UI：
```bash
mlflow ui --backend-store-uri ./examples/mlruns
```
然后在浏览器中访问 http://localhost:5000

### Q4: 如何修改配置？

**A**: 编辑配置文件：
```bash
# 编辑默认配置
nano config/default_config.yaml

# 或创建自定义配置
cp config/default_config.yaml config/my_config.yaml
# 然后在启动时指定: python -m src.cli.main --config config/my_config.yaml
```

### Q5: 训练的模型保存在哪里？

**A**: 模型保存在以下位置：
- 模型文件: `outputs/models/`
- MLflow记录: `examples/mlruns/`
- 训练报告: `outputs/reports/`

### Q6: 如何获取帮助？

**A**: 多种方式获取帮助：
```bash
# 查看命令行帮助
python -m src.cli.main --help

# 在系统中选择"查看帮助"菜单
python -m src.cli.main
# 然后输入 6

# 查看在线文档
# 访问 docs/ 目录中的文档
```

## 💡 使用技巧

### 技巧1: 使用默认值快速开始
大部分参数都有合理的默认值，新手可以直接按回车使用默认值。

### 技巧2: 从简单模型开始
建议先使用LGBM模型，它训练快速且效果稳定，适合新手学习。

### 技巧3: 小范围测试
第一次使用时，可以用较短的时间范围（如1-2年）进行测试，熟悉流程后再扩大范围。

### 技巧4: 查看日志
如果遇到问题，查看日志文件可以获得更多信息：
```bash
tail -f logs/system_$(date +%Y-%m-%d).log
```

### 技巧5: 保存配置
如果你经常使用某组参数，可以保存为配置文件，下次直接加载。

## 🎓 学习路径

### 新手路径 (1-2周)
1. ✅ 完成本快速开始指南
2. 📖 阅读术语表，理解基本概念
3. 🔄 多次训练和回测，熟悉流程
4. 📊 学习如何解读回测报告
5. 💡 理解交易信号的含义

### 进阶路径 (2-4周)
1. 🔧 学习调整模型参数
2. 📈 对比不同模型的表现
3. 🎯 自定义回测策略
4. 📚 深入学习量化交易理论
5. 💻 阅读API文档，尝试自定义开发

### 专家路径 (1-3个月)
1. 🧪 开发自己的因子
2. 🤖 实现自定义模型
3. 📊 优化策略参数
4. 🔬 进行深入的回测分析
5. 🚀 部署到实盘交易（谨慎！）

## 📞 获取支持

如果遇到问题或有建议：

- 📖 查看文档: `docs/` 目录
- 💬 提交Issue: GitHub Issues
- 🗨️ 参与讨论: GitHub Discussions
- 📧 联系作者: [你的邮箱]

## ⚠️ 重要提示

1. **风险警告**: 量化交易存在风险，历史表现不代表未来收益
2. **学习为主**: 建议先在模拟环境中充分学习和测试
3. **谨慎实盘**: 实盘交易前请充分理解策略和风险
4. **持续学习**: 市场在变化，需要持续学习和优化策略

---

**准备好开始你的量化交易之旅了吗？** 🚀

运行 `python -m src.cli.main` 开始使用！
