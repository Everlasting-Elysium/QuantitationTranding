# ç›®å½•ç»“æ„è§„åˆ’

## å½“å‰ç›®å½•ç»“æ„

```
QuantitationTranding/
â”œâ”€â”€ .git/                          # Gitç‰ˆæœ¬æ§åˆ¶
â”œâ”€â”€ .gitignore                     # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .kiro/                         # Kiroé…ç½®å’ŒSpecæ–‡æ¡£
â”‚   â””â”€â”€ specs/
â”‚       â””â”€â”€ qlib-trading-system/
â”‚           â”œâ”€â”€ requirements.md    # éœ€æ±‚æ–‡æ¡£
â”‚           â”œâ”€â”€ design.md         # è®¾è®¡æ–‡æ¡£
â”‚           â””â”€â”€ tasks.md          # ä»»åŠ¡åˆ—è¡¨
â”œâ”€â”€ data/                          # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ cn_data/                  # ä¸­å›½Aè‚¡æ•°æ®
â”œâ”€â”€ examples/                      # qlibç¤ºä¾‹ï¼ˆå·²å­˜åœ¨ï¼‰
â”‚   â”œâ”€â”€ benchmarks/
â”‚   â”œâ”€â”€ mlruns/                   # MLflowè¿è¡Œè®°å½•
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/                       # è„šæœ¬ï¼ˆå·²å­˜åœ¨ï¼‰
â”‚   â”œâ”€â”€ get_data.py               # æ•°æ®ä¸‹è½½è„šæœ¬
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ Dockerfile                     # Dockeré…ç½®
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜ï¼ˆå·²æ›´æ–°ï¼‰
â”œâ”€â”€ PROJECT_PLAN.md               # é¡¹ç›®è®¡åˆ’ï¼ˆæ–°å»ºï¼‰
â”œâ”€â”€ DIRECTORY_STRUCTURE.md        # æœ¬æ–‡ä»¶ï¼ˆæ–°å»ºï¼‰
â”œâ”€â”€ main.go                        # æ—§æ–‡ä»¶ï¼ˆå¾…æ¸…ç†ï¼‰
â”œâ”€â”€ old_main.py                   # æ—§æ–‡ä»¶ï¼ˆå¾…æ¸…ç†ï¼‰
â””â”€â”€ qlib_main.py                  # æ—§æ–‡ä»¶ï¼ˆå¾…æ¸…ç†ï¼‰
```

## è®¡åˆ’æ–°å¢çš„ç›®å½•ç»“æ„

```
QuantitationTranding/
â”œâ”€â”€ src/                           # æºä»£ç ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli/                      # CLIç•Œé¢å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py              # ä¸»CLIå…¥å£
â”‚   â”‚   â””â”€â”€ prompts.py           # äº¤äº’å¼æç¤º
â”‚   â”œâ”€â”€ application/              # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ training_manager.py  # è®­ç»ƒç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ backtest_manager.py  # å›æµ‹ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ signal_generator.py  # ä¿¡å·ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ model_registry.py    # æ¨¡å‹æ³¨å†Œè¡¨
â”‚   â”‚   â”œâ”€â”€ visualization_manager.py  # å¯è§†åŒ–ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ report_generator.py  # æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒå±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_manager.py      # æ•°æ®ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ model_factory.py     # æ¨¡å‹å·¥å‚
â”‚   â”‚   â””â”€â”€ config_manager.py    # é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ infrastructure/           # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ qlib_wrapper.py      # Qlibå°è£…
â”‚   â”‚   â”œâ”€â”€ mlflow_tracker.py    # MLflowè¿½è¸ªå™¨
â”‚   â”‚   â””â”€â”€ logger_system.py     # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ data_models.py       # æ•°æ®ç±»å®šä¹‰
â”‚   â””â”€â”€ templates/                # æ¨¡å‹æ¨¡æ¿
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ model_templates.py   # æ¨¡æ¿å®šä¹‰
â”‚
â”œâ”€â”€ tests/                         # æµ‹è¯•ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py               # pytesté…ç½®
â”‚   â”œâ”€â”€ unit/                     # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_config_manager.py
â”‚   â”‚   â”œâ”€â”€ test_data_manager.py
â”‚   â”‚   â”œâ”€â”€ test_model_factory.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ property/                 # å±æ€§æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_training_properties.py
â”‚   â”‚   â”œâ”€â”€ test_backtest_properties.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ integration/              # é›†æˆæµ‹è¯•
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ test_training_workflow.py
â”‚       â”œâ”€â”€ test_backtest_workflow.py
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ config/                        # é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ default_config.yaml       # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ model_templates.yaml      # æ¨¡å‹æ¨¡æ¿é…ç½®
â”‚
â”œâ”€â”€ docs/                          # æ–‡æ¡£ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ quick_start.md            # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ user_guide.md             # ç”¨æˆ·æ‰‹å†Œ
â”‚   â”œâ”€â”€ api_reference.md          # APIå‚è€ƒ
â”‚   â”œâ”€â”€ glossary.md               # æœ¯è¯­è¡¨
â”‚   â””â”€â”€ images/                   # æ–‡æ¡£å›¾ç‰‡
â”‚
â”œâ”€â”€ logs/                          # æ—¥å¿—ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ outputs/                       # è¾“å‡ºç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ models/                   # è®­ç»ƒçš„æ¨¡å‹
â”‚   â”œâ”€â”€ reports/                  # ç”Ÿæˆçš„æŠ¥å‘Š
â”‚   â””â”€â”€ charts/                   # ç”Ÿæˆçš„å›¾è¡¨
â”‚
â”œâ”€â”€ requirements.txt               # Pythonä¾èµ–ï¼ˆæ–°å»ºï¼‰
â”œâ”€â”€ setup.py                       # å®‰è£…é…ç½®ï¼ˆæ–°å»ºï¼‰
â”œâ”€â”€ pytest.ini                     # pytesté…ç½®ï¼ˆæ–°å»ºï¼‰
â””â”€â”€ .env.example                   # ç¯å¢ƒå˜é‡ç¤ºä¾‹ï¼ˆæ–°å»ºï¼‰
```

## ç›®å½•è¯´æ˜

### æºä»£ç ç›®å½• (src/)

#### cli/ - CLIç•Œé¢å±‚
- **main.py**: ä¸»ç¨‹åºå…¥å£ï¼Œå®ç°MainCLIç±»
- **prompts.py**: äº¤äº’å¼æç¤ºï¼Œå®ç°InteractivePromptç±»

#### application/ - åº”ç”¨å±‚
- **training_manager.py**: ç®¡ç†æ¨¡å‹è®­ç»ƒæµç¨‹
- **backtest_manager.py**: ç®¡ç†å›æµ‹æµç¨‹
- **signal_generator.py**: ç”Ÿæˆäº¤æ˜“ä¿¡å·
- **model_registry.py**: ç®¡ç†æ¨¡å‹ç‰ˆæœ¬
- **visualization_manager.py**: ç”Ÿæˆå›¾è¡¨
- **report_generator.py**: ç”ŸæˆæŠ¥å‘Š

#### core/ - æ ¸å¿ƒå±‚
- **data_manager.py**: æ•°æ®ä¸‹è½½ã€éªŒè¯ã€æ›´æ–°
- **model_factory.py**: åˆ›å»ºæ¨¡å‹å®ä¾‹
- **config_manager.py**: é…ç½®æ–‡ä»¶ç®¡ç†

#### infrastructure/ - åŸºç¡€è®¾æ–½å±‚
- **qlib_wrapper.py**: å°è£…qlibæ¥å£
- **mlflow_tracker.py**: å°è£…MLflowæ¥å£
- **logger_system.py**: æ—¥å¿—ç³»ç»Ÿ

#### models/ - æ•°æ®æ¨¡å‹
- **data_models.py**: æ‰€æœ‰æ•°æ®ç±»å®šä¹‰ï¼ˆTrainingConfig, BacktestResultç­‰ï¼‰

#### templates/ - æ¨¡å‹æ¨¡æ¿
- **model_templates.py**: é¢„é…ç½®çš„æ¨¡å‹æ¨¡æ¿

### æµ‹è¯•ç›®å½• (tests/)

#### unit/ - å•å…ƒæµ‹è¯•
æµ‹è¯•å„ä¸ªæ¨¡å—çš„ç‹¬ç«‹åŠŸèƒ½

#### property/ - å±æ€§æµ‹è¯•
ä½¿ç”¨Hypothesisè¿›è¡Œå±æ€§æµ‹è¯•ï¼ŒéªŒè¯ç³»ç»Ÿåœ¨å„ç§è¾“å…¥ä¸‹çš„æ­£ç¡®æ€§

#### integration/ - é›†æˆæµ‹è¯•
æµ‹è¯•ç«¯åˆ°ç«¯å·¥ä½œæµ

### é…ç½®ç›®å½• (config/)

#### default_config.yaml
ç³»ç»Ÿé»˜è®¤é…ç½®ï¼ŒåŒ…æ‹¬ï¼š
- æ•°æ®è·¯å¾„
- MLflowé…ç½®
- è®­ç»ƒå‚æ•°
- å›æµ‹å‚æ•°
- é£é™©æ§åˆ¶å‚æ•°

#### model_templates.yaml
é¢„é…ç½®çš„æ¨¡å‹æ¨¡æ¿å®šä¹‰

### æ–‡æ¡£ç›®å½• (docs/)

#### quick_start.md
5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹

#### user_guide.md
å®Œæ•´çš„ç”¨æˆ·æ‰‹å†Œï¼ŒåŒ…æ‹¬æ‰€æœ‰åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜

#### api_reference.md
å¼€å‘è€…APIæ–‡æ¡£

#### glossary.md
é‡åŒ–äº¤æ˜“æœ¯è¯­è¡¨å’Œé€šä¿—è§£é‡Š

### è¾“å‡ºç›®å½• (outputs/)

#### models/
å­˜å‚¨è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶

#### reports/
å­˜å‚¨ç”Ÿæˆçš„å›æµ‹æŠ¥å‘Šå’Œåˆ†ææŠ¥å‘Š

#### charts/
å­˜å‚¨ç”Ÿæˆçš„å›¾è¡¨æ–‡ä»¶

## æ–‡ä»¶æ¸…ç†è®¡åˆ’

ä»¥ä¸‹æ—§æ–‡ä»¶å°†åœ¨æ–°ç³»ç»Ÿå®ç°åæ¸…ç†ï¼š
- `main.go` - æ—§çš„Goä»£ç 
- `old_main.py` - æ—§çš„Pythonä»£ç 
- `qlib_main.py` - æ—§çš„qlibæµ‹è¯•ä»£ç 

è¿™äº›æ–‡ä»¶å¯ä»¥å…ˆä¿ç•™ä½œä¸ºå‚è€ƒï¼Œå¾…æ–°ç³»ç»Ÿç¨³å®šååˆ é™¤ã€‚

## æ•°æ®ç›®å½•è¯´æ˜

### data/cn_data/
å­˜å‚¨qlibçš„ä¸­å›½Aè‚¡æ•°æ®ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¸‹è½½ï¼š
```bash
python scripts/get_data.py qlib_data --target_dir ./data/cn_data --region cn
```

æ•°æ®ç»“æ„ï¼š
```
data/cn_data/
â”œâ”€â”€ calendars/          # äº¤æ˜“æ—¥å†
â”œâ”€â”€ instruments/        # è‚¡ç¥¨åˆ—è¡¨
â””â”€â”€ features/          # ç‰¹å¾æ•°æ®
```

## æ—¥å¿—ç›®å½•è¯´æ˜

### logs/
å­˜å‚¨ç³»ç»Ÿè¿è¡Œæ—¥å¿—ï¼ŒæŒ‰æ—¥æœŸå’Œæ¨¡å—åˆ†ç±»ï¼š
```
logs/
â”œâ”€â”€ system_2024-01-01.log
â”œâ”€â”€ training_2024-01-01.log
â”œâ”€â”€ backtest_2024-01-01.log
â””â”€â”€ ...
```

## MLflowç›®å½•è¯´æ˜

### examples/mlruns/
MLflowå­˜å‚¨å®éªŒè®°å½•çš„ç›®å½•ï¼š
```
examples/mlruns/
â”œâ”€â”€ 0/                 # é»˜è®¤å®éªŒ
â”œâ”€â”€ 1/                 # è‡ªå®šä¹‰å®éªŒ
â””â”€â”€ .trash/           # å·²åˆ é™¤çš„è¿è¡Œ
```

## å¼€å‘é¡ºåº

æŒ‰ç…§ä»¥ä¸‹é¡ºåºåˆ›å»ºç›®å½•å’Œæ–‡ä»¶ï¼š

### Phase 1: åŸºç¡€è®¾æ–½
1. åˆ›å»º `src/` åŠå…¶å­ç›®å½•
2. åˆ›å»º `tests/` åŠå…¶å­ç›®å½•
3. åˆ›å»º `config/`
4. åˆ›å»º `logs/`
5. åˆ›å»º `outputs/` åŠå…¶å­ç›®å½•
6. åˆ›å»º `requirements.txt`
7. åˆ›å»º `setup.py`
8. åˆ›å»º `pytest.ini`

### Phase 2-5: åŠŸèƒ½å®ç°
æŒ‰ç…§tasks.mdä¸­çš„ä»»åŠ¡é¡ºåºï¼Œé€æ­¥åˆ›å»ºå„æ¨¡å—æ–‡ä»¶

### Phase 6: æ–‡æ¡£
åˆ›å»º `docs/` ç›®å½•åŠå…¶æ–‡æ¡£æ–‡ä»¶

## Gitå¿½ç•¥é…ç½®

æ›´æ–° `.gitignore` æ·»åŠ ï¼š
```
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
env/
venv/
*.egg-info/
dist/
build/

# æ•°æ®å’Œè¾“å‡º
data/
logs/
outputs/
examples/mlruns/

# IDE
.vscode/
.idea/
*.swp
*.swo

# é…ç½®
.env
config/local_config.yaml

# æµ‹è¯•
.pytest_cache/
.coverage
htmlcov/
```

## ä¸‹ä¸€æ­¥

1. å¼€å§‹æ‰§è¡Œ `.kiro/specs/qlib-trading-system/tasks.md` ä¸­çš„ä»»åŠ¡
2. é¦–å…ˆåˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„ï¼ˆä»»åŠ¡1ï¼‰
3. ç„¶åæŒ‰é¡ºåºå®ç°å„ä¸ªæ¨¡å—

---

**ç›®å½•ç»“æ„å·²è§„åˆ’å®Œæˆï¼Œå¯ä»¥å¼€å§‹å®æ–½äº†ï¼** ğŸš€
