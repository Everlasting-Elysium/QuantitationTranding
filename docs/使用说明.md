# 量化交易系统使用说明 / Quantitative Trading System User Guide

## 快速开始 / Quick Start

### 1. 初始化系统 / Initialize System

```bash
# 运行初始化脚本
python init_system.py

# 或使用快速启动脚本
bash quick_start.sh
```

### 2. 启动主程序 / Start Main Program

```bash
python main.py
```

## 主菜单选项 / Main Menu Options

启动后，你会看到主菜单：

```
📊 量化交易系统 - 主菜单 / Quantitative Trading System - Main Menu

  ⭐ 0. 🎯 引导式工作流程 / Guided Workflow
     完整的投资流程引导（推荐新手使用）

  1. 模型训练 / Model Training
  2. 历史回测 / Historical Backtest
  3. 信号生成 / Signal Generation
  4. 数据管理 / Data Management
  5. 模型管理 / Model Management
  6. 报告查看 / View Reports
  7. 系统管理 / System Management
  
  h. 帮助 / Help
  q. 退出 / Quit
```

## 使用引导式工作流程 / Using Guided Workflow

### 步骤说明 / Step Instructions

1. **选择选项 0** - 进入引导式工作流程
2. **确认开始** - 当系统询问"是否开始引导式工作流程？"时，输入：
   - `y` 或 `是` - 开始
   - `n` 或 `否` - 取消
   - 直接按回车 - 使用默认值（是）

3. **按照提示操作** - 系统会引导你完成10个步骤：
   - 市场和资产选择
   - 智能推荐
   - 目标设定
   - 策略优化
   - 模型训练
   - 历史回测
   - 模拟交易
   - 实盘交易设置
   - 实盘交易执行
   - 报告配置

### 常见问题 / FAQ

**Q: 选择选项后没有反应？**

A: 请检查是否有确认提示等待你的输入。系统可能在等待你回答"是/否"问题。

**Q: 如何暂停工作流程？**

A: 按 `Ctrl+C` 可以中断工作流程。进度会自动保存，下次可以继续。

**Q: 如何继续未完成的工作流程？**

A: 再次选择选项 0，系统会自动检测并询问是否继续之前的进度。

**Q: 工作流程状态保存在哪里？**

A: 保存在 `workflow_states/` 目录中。

## 交互提示说明 / Interactive Prompt Guide

系统使用交互式提示收集用户输入：

### 确认提示 / Confirmation Prompt

```
是否开始引导式工作流程？ (是/否) [默认: 是]:
```

可接受的输入：
- **是**: `y`, `yes`, `是`, `shi`, `s`
- **否**: `n`, `no`, `否`, `fou`, `f`
- **默认**: 直接按回车使用默认值

### 文本输入 / Text Input

```
请输入模型名称 [默认: lgbm_model]:
```

- 输入文本后按回车
- 直接按回车使用默认值（如果有）

### 选择输入 / Choice Input

```
请选择市场:
  1. 中国A股 (CSI300)
  2. 中国A股 (CSI500)
  3. 全部A股
请输入选项编号 [默认: 1]:
```

- 输入选项编号（1, 2, 3等）
- 直接按回车使用默认值

## 故障排除 / Troubleshooting

### 问题1: 相对导入错误

```
ValueError: attempted relative import beyond top-level package
```

**解决方案**:
- 确保使用 `python main.py` 启动，而不是直接运行 `src/cli/main_cli.py`
- 检查 Python 路径设置是否正确

### 问题2: qlib未初始化

```
qlib未初始化，请先调用init()方法
```

**解决方案**:
- 运行 `python init_system.py` 初始化系统
- 确保数据已正确下载和解压

### 问题3: 数据路径不存在

```
数据路径不存在: ~/.qlib/qlib_data/cn_data
```

**解决方案**:
```bash
# 检查数据是否存在
ls -la ~/.qlib/qlib_data/cn_data/

# 如果只有zip文件，需要解压
unzip ~/.qlib/qlib_data/cn_data/*.zip -d ~/.qlib/qlib_data/cn_data/
```

## 系统要求 / System Requirements

- Python 3.8+
- 4GB+ RAM
- 10GB+ 磁盘空间（用于数据）
- Linux/macOS/Windows

## 依赖包 / Dependencies

主要依赖：
- qlib
- pandas
- numpy
- scikit-learn
- lightgbm
- torch
- mlflow

安装所有依赖：
```bash
pip install -r requirements.txt
```

## 获取帮助 / Getting Help

- 在主菜单输入 `h` 查看帮助
- 查看 `docs/` 目录中的详细文档
- 查看 `examples/` 目录中的示例代码

## 目录结构 / Directory Structure

```
QuantitationTranding/
├── main.py                 # 主入口
├── init_system.py          # 初始化脚本
├── src/                    # 源代码
│   ├── cli/               # 命令行界面
│   ├── core/              # 核心功能
│   ├── infrastructure/    # 基础设施
│   └── utils/             # 工具函数
├── config/                 # 配置文件
├── data/                   # 数据目录
├── docs/                   # 文档
│   └── summary/           # 总结文档
├── examples/               # 示例代码
├── tests/                  # 测试代码
│   ├── cli/               # CLI测试
│   ├── integration/       # 集成测试
│   └── unit/              # 单元测试
├── outputs/                # 输出结果
├── logs/                   # 日志文件
└── workflow_states/        # 工作流状态
```

## 更新日志 / Changelog

### 最近修复 / Recent Fixes

1. ✅ 修复了相对导入错误
2. ✅ 修复了数据验证中的numpy数组判断问题
3. ✅ 整理了项目目录结构
4. ✅ 改进了初始化流程

---

**提示**: 如果遇到问题，请先查看本文档的故障排除部分。
